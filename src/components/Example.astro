<!-- Examples -->
<section id="examples" class="mx-auto max-w-6xl px-4 sm:px-6 py-14">
  <h2 class="text-2xl font-bold">Examples</h2>

  <div class="mt-4 grid md:grid-cols-2 gap-6">
    <div class="rounded-xl border border-gray-200 bg-white p-4">
      <div class="font-semibold">OLTP on SSD (32 GB, 8 vCPU)</div>
      <pre class="mt-2 overflow-x-auto text-sm"><code>curl -sS "https://api.example.com/v1/tune?memory_gb=32&cpus=8&storage_type=ssd&workload=oltp"</code></pre>
    </div>
    <div class="rounded-xl border border-gray-200 bg-white p-4">
      <div class="font-semibold">OLAP on NVMe (128 GB, 24 vCPU)</div>
      <pre class="mt-2 overflow-x-auto text-sm"><code>curl -sS "https://api.example.com/v1/tune/memory_gb=128&cpus=24&storage_type=nvme&workload=olap&max_conn=300"</code></pre>
    </div>
  </div>

  <div class="mt-6 rounded-xl border border-gray-200 bg-white p-4">
    <div class="font-semibold">Ansible snippet</div>
    <pre class="mt-2 overflow-x-auto text-sm"><code>- name: Fetch PG tuning
  ansible.builtin.uri:
    url: "https://api.example.com/v1/tune?memory_gb=&lcub;&lcub; ram_gb &rcub;&rcub;&cpus=&lcub;&lcub; vcpus &rcub;&rcub;&storage_type=&lcub;&lcub; storage &rcub;&rcub;&workload=&lcub;&lcub; profile &rcub;&rcub;"
    method: GET
    return_content: yes
  register: pg_tune

- name: Write postgresql.conf overrides
  ansible.builtin.copy:
    dest: /etc/postgresql/conf.d/90-tune.conf
    content: |
      shared_buffers = &lcub;&lcub; pg_tune.json.shared_buffers &rcub;&rcub;
      effective_cache_size = &lcub;&lcub; pg_tune.json.effective_cache_size &rcub;&rcub;
      work_mem = &lcub;&lcub; pg_tune.json.work_mem &rcub;&rcub;
      maintenance_work_mem = &lcub;&lcub; pg_tune.json.maintenance_work_mem &rcub;&rcub;
      wal_buffers = &lcub;&lcub; pg_tune.json.wal_buffers &rcub;&rcub;
      checkpoint_completion_target = &lcub;&lcub; pg_tune.json.checkpoint_completion_target &rcub;&rcub;
      default_statistics_target = &lcub;&lcub; pg_tune.json.default_statistics_target &rcub;&rcub;
      random_page_cost = &lcub;&lcub; pg_tune.json.random_page_cost &rcub;&rcub;
      effective_io_concurrency = &lcub;&lcub; pg_tune.json.effective_io_concurrency &rcub;&rcub;
      max_connections = &lcub;&lcub; pg_tune.json.max_connections &rcub;&rcub;
      max_worker_processes = &lcub;&lcub; pg_tune.json.max_worker_processes &rcub;&rcub;
      max_parallel_workers = &lcub;&lcub; pg_tune.json.max_parallel_workers &rcub;&rcub;
      max_parallel_workers_per_gather = &lcub;&lcub; pg_tune.json.max_parallel_workers_per_gather &rcub;&rcub;</code></pre>
  </div>
</section>
